<html>
    <head>
         <meta charset="UTF-8">
         <title>StarBiochem Version 0.01</title>
         <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
         <script type="text/javascript" src="jsmol/JSmol.min.js"></script>
         
    </head>

    <body>
        <h1>StarX demo page</h1>
        <div>{["StarX":"StarBiochem", "width":500, "height":500,"color":"red"]}</div>
        
        	<script>
	function this_context()
	{
	
 	jmol_isReady = function(applet) {
var myviewer = $("div").data("myviewer");
var viewer_addr = "#" + myviewer;

$(viewer_addr).append("<style>" + viewer_addr + " {background-color:rgba(122,122,0,0.5); position:absolute; top:0px; left:0px;}</style>");
$(viewer_addr).append("<button id='starBiochemX_UI' onclick='javascript:onClickFunction(" + myviewer + ")'>isosurface vdw 4 etc</button>");
$(viewer_addr).append("<style>#starBiochemX_UI {background-color:rgba(0,0,122,0.1); position:absolute; top:10px; left:10px;}</style>HELLO WORLD");
$('#starBiochemX_UI').css('z-index',2);
console.log(Jmol._getElement(viewer_addr));
//Jmol._getElement(applet, "appletdiv").style.border="1px solid blue";
}	
 	
 	
	var info = {
		width: 500,
		height: 500,
		color: "red",
	};
	info.debug = false;
	info.addSelectionOptions = false;
	info.serverURL = "http://chemapps.stolaf.edu/jmol/jsmol/jsmol.php";
	info.use = "HTML5";
	info.j2sPath = "jsmol/j2s";
	info.readyFunction = jmol_isReady;
	info.script = "set antialiasDisplay;load jsmol/data/caffeine.mol;";
	info.disableJ2SLoadMonitor = true;
	info.disableInitialConsole = true;
	Jmol.getApplet('viewer', info);
	}

	$(function() {
	
	function wait_for_require(callback)
	{
		alert( "HERE " + typeof( Jmol ) ) ;
		setTimeout( function() {
			if( typeof(Jmol)!='undefined' )
			{
				callback();
			} else {
				wait_for_require(callback);
				console.info( "Wait for cvallback" ) ;
			}
		}, 20 ) ;
	}
	
	alert( "HERE" ) ;
	wait_for_require(function() { 
	
	console.info( "Got back! " + Jmol ) ; 
		this_context();
	} ) ;
	
	} ) ;
	</script>
        
        <script src='StarX/starx.js'></script>
    </body>

</html>
